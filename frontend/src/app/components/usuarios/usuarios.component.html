<div class="container">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Gestión de Usuarios</h2>
    <button class="btn btn-add" data-bs-toggle="modal" data-bs-target="#modalAgregar" (click)="resetFormulario()">
      <i class="bi bi-person-plus-fill"></i> Añadir Usuario
    </button>
  </div>

  <div class="table-container">
    <table class="table table-striped table-bordered mt-4">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Correo</th>
          <th>Edad</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let usuario of usuarios">
          <td>{{ usuario.id }}</td>
          <td>{{ usuario.nombre }}</td>
          <td>{{ usuario.email }}</td>
          <td>{{ usuario.edad }}</td>
          <td>
            <button
              class="btn btn-warning btn-sm"
              (click)="seleccionarUsuario(usuario)"
              data-bs-toggle="modal"
              data-bs-target="#modalEditar"
            >
              Editar
            </button>
            <button
              class="btn btn-danger btn-sm"
              (click)="seleccionarUsuario(usuario)"
              data-bs-toggle="modal"
              data-bs-target="#modalEliminar"
            >
              <i class="bi bi-trash3-fill"></i> Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="footer">
    <p>© 2025 Gestión de Usuarios | Interfaz creada con Bootstrap</p>
  </div>
</div>

<!-- Modal Agregar -->
<div class="modal fade" id="modalAgregar" tabindex="-1" aria-labelledby="modalAgregarLabel" aria-hidden="true">
  <div class="modal-dialog">
    <form class="modal-content" #addForm="ngForm" (ngSubmit)="crearUsuario()">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">Añadir Usuario</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">Nombre</label>
            <input type="text" class="form-control" name="nombre" required [(ngModel)]="usuarioActual.nombre">
          </div>
          <div class="mb-3">
            <label class="form-label">Correo</label>
            <input type="email" class="form-control" name="email" required [(ngModel)]="usuarioActual.email">
          </div>
          <div class="mb-3">
            <label class="form-label">Edad</label>
            <input type="number" class="form-control" name="edad" min="1" required [(ngModel)]="usuarioActual.edad">
          </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="submit" class="btn btn-success">Guardar</button>
      </div>
    </form>
  </div>
</div>


<!-- Modal Editar -->
<div class="modal fade" id="modalEditar" tabindex="-1">
  <div class="modal-dialog">
    <form class="modal-content" (ngSubmit)="actualizarUsuario()">
      <div class="modal-header bg-warning text-white">
        <h5 class="modal-title">Editar Usuario</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label>Nombre</label>
          <input [(ngModel)]="usuarioActual.nombre" name="nombreEditar" class="form-control" required />
        </div>
        <div class="mb-3">
          <label>Correo</label>
          <input [(ngModel)]="usuarioActual.email" name="emailEditar" class="form-control" required />
        </div>
        <div class="mb-3">
          <label>Edad</label>
          <input type="number" [(ngModel)]="usuarioActual.edad" name="edadEditar" class="form-control" required />
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="submit" class="btn btn-success">Guardar Cambios</button>
      </div>
    </form>
  </div>
</div>


<!-- Modal eliminar -->
<div class="modal fade" id="modalEliminar" tabindex="-1" aria-labelledby="modalEliminarLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="modalEliminarLabel">Eliminar Usuario</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body text-center">
        <p>¿Estás seguro de que deseas eliminar a <strong>{{ usuarioActual.nombre }}</strong>?</p>
      </div>
      <div class="modal-footer justify-content-center">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button class="btn btn-danger" (click)="eliminarUsuario()">Sí, eliminar</button>
      </div>
    </div>
  </div>
</div>

